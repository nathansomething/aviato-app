package com.aviato.flightData;

import java.io.DataOutputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import com.google.gson.JsonArray;
import com.google.gson.JsonObject;
import com.google.gson.JsonPrimitive;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.IOException;

public class FlightQuery {
    public static void main(String [] args) {
        URL url;
        try {
            url = new URL("https://www.googleapis.com/qpxExpress/v1/trips");
            HttpURLConnection pmConn = (HttpURLConnection) url.openConnection();
            
            pmConn.setRequestMethod("POST");
            pmConn.setRequestProperty("content-type", "application/json");
            pmConn.setRequestProperty("accept", "application/json");
            
            
            pmConn.setDoOutput(true);
            DataOutputStream out = new DataOutputStream(pmConn.getOutputStream());
            out.writeBytes(params);
            out.flush();
            out.close();
            
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }        
    }
        
    // Args -> JSON.String
    public String createJSON(String curr, String dest, String date,
            String date2) {
        JsonObject output = new JsonObject();

        JsonObject request = new JsonObject();

        JsonObject passengers = new JsonObject();
        JsonArray slice = new JsonArray();

        JsonObject departure = new JsonObject();
        JsonObject arrival = new JsonObject();
        JsonPrimitive current = new JsonPrimitive("curr");
        JsonPrimitive destination = new JsonPrimitive("dest");
        JsonPrimitive departDate = new JsonPrimitive("date1");
        JsonPrimitive arriveDate = new JsonPrimitive("date2");

        departure.add("origin", current);
        departure.add("destination", destination);
        departure.add("date", departDate);

        arrival.add("origin", destination);
        arrival.add("destination", current);
        arrival.add("date", arriveDate);

        passengers.add("adultCount", new JsonPrimitive(2));

        slice.add(departure);
        slice.add(arrival);

        request.add("passengers", passengers);
        request.add("slice", slice);

        output.add("request", request);
        
        return output.toString();

    }
}
